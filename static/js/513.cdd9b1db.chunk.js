"use strict";(self.webpackChunkfirst_app=self.webpackChunkfirst_app||[]).push([[513],{4637:function(o,n,t){t.r(n),t.d(n,{default:function(){return V}});var i=t(8683),s=t(5671),e=t(3144),_=t(136),a=t(516),r=t(2791),c=t(8687),l=t(8161),f=t(7689),u=t(1548),d=t(7781),h=t(3433),p="Post_posts__post__RgREg",m="Post_posts__pic__c7ukC",v="Post_posts__posttext__0Xxy7",g="Post_posts__likes__22AWV",x="Post_posts__like__ztY+k",j="Post_posts__count__PRkrd",P=t.p+"static/media/like2.65e71c9cb415e8aa5a75.png",N=t(184),k=function(o){return(0,N.jsxs)("div",{className:p,children:[(0,N.jsx)("div",{className:m,children:(0,N.jsx)("img",{src:"#",alt:""})}),(0,N.jsx)("div",{className:v,children:(0,N.jsx)("p",{children:o.text})}),(0,N.jsxs)("div",{className:g,children:[(0,N.jsx)("div",{className:x,children:(0,N.jsx)("button",{children:(0,N.jsx)("img",{src:P,alt:""})})}),(0,N.jsx)("div",{className:j,children:o.likes})]})]})},I="MyPosts_posts__VLhpH",Z="MyPosts_posts__new__GX7JL",b="MyPosts_posts__input__m0vnv",L="MyPosts_posts__button__hxx3v",y="MyPosts_posts__wall__RjDdY",S=t(5304),C=t(4654),F=t(6139),A=t(704),w=(0,S.D)(10),H=(0,A.Z)({form:"newPost"})((function(o){return(0,N.jsxs)("form",{onSubmit:o.handleSubmit,className:Z,children:[(0,N.jsx)(F.Z,{className:b,placeholder:"WASSUUUUUUUUUUP",component:C.gx,name:"newPostBody",validate:[S.C,w]}),(0,N.jsx)("button",{className:L,children:"Post"})]})})),U=function(o){console.log("render my posts");var n=(0,h.Z)(o.postData).reverse().map((function(o){return(0,N.jsx)(k,{likes:o.likes,text:o.text},o.id)}));return(0,N.jsxs)("div",{className:I,children:[(0,N.jsx)("h2",{children:"My posts"}),(0,N.jsx)(H,{onSubmit:function(n){o.addPost(n.newPostBody)}}),(0,N.jsx)("div",{className:y,children:n})]})},E=(0,c.$j)((function(o){return{postData:o.profilePage.postData,info:o.me,newPostText:o.profilePage.newPostText}}),{addPost:l.q2})(U),D=t(9439),J=t(4550),M={content__cover:"Profile__Info_content__cover__5TNK7",info:"Profile__Info_info__qbrtZ",info__item:"Profile__Info_info__item__j006n",info__info:"Profile__Info_info__info__ZfEXi",info__photo:"Profile__Info_info__photo__pien-",info__photo__upd:"Profile__Info_info__photo__upd__jjtex",info__photo__upd__icon:"Profile__Info_info__photo__upd__icon__NKjZE",info__updatePhoto:"Profile__Info_info__updatePhoto__MWsF4",info__name:"Profile__Info_info__name__6x60-",info__additional:"Profile__Info_info__additional__wDuyu",info__contactsHead:"Profile__Info_info__contactsHead__AbIvA",info__looking:"Profile__Info_info__looking__BatM+",info__lookingActive:"Profile__Info_info__lookingActive__ptHCH",info__checkbox:"Profile__Info_info__checkbox__2Jczk",info__contactName:"Profile__Info_info__contactName__kiG2F",info__input:"Profile__Info_info__input__uLUgk",info__contacts:"Profile__Info_info__contacts__4TGRx",info__contactsActive:"Profile__Info_info__contactsActive__9UgQ0",info__contact:"Profile__Info_info__contact__rBo+8",info__contactNull:"Profile__Info_info__contactNull__s41EB",info__error:"Profile__Info_info__error__7Wg9+",status:"Profile__Info_status__3NOE2",status__text:"Profile__Info_status__text__6QQq0",status__inputContainer:"Profile__Info_status__inputContainer__gNcmB",infoLoading:"Profile__Info_infoLoading__P9m96",infoLoading__photo:"Profile__Info_infoLoading__photo__NeF0k",loading:"Profile__Info_loading__t2bTR",infoLoading__info:"Profile__Info_infoLoading__info__7m2AK",infoLoading__name:"Profile__Info_infoLoading__name__TWH0V",infoLoading__status:"Profile__Info_infoLoading__status__wZFAC",infoLoading__additional:"Profile__Info_infoLoading__additional__7HUJS",infoLoading__contacts:"Profile__Info_infoLoading__contacts__KpWtG",infoLoading__looking:"Profile__Info_infoLoading__looking__5ciSx",infoLoading__contactsHead:"Profile__Info_infoLoading__contactsHead__5IZAC",infoLoading__contactsHeader:"Profile__Info_infoLoading__contactsHeader__ndfmE",infoLoading__contactName:"Profile__Info_infoLoading__contactName__pCewu"},O=t(1949),T=function(o){var n=(0,r.useState)(!1),t=(0,D.Z)(n,2),i=t[0],s=t[1],e=(0,r.useState)(o.status),_=(0,D.Z)(e,2),a=_[0],c=_[1];(0,r.useEffect)((function(){c(o.status)}),[o.status]);return(0,N.jsxs)("div",{className:M.status,children:[!i&&(0,N.jsx)("div",{onClick:function(){s(!0)},className:M.status__text,children:o.status||"How are you today?"}),i&&(0,N.jsx)("div",{className:M.status__inputContainer,children:(0,N.jsx)("input",{onBlur:function(){s(!1),a!==o.status&&o.updateStatus(a)},onChange:function(o){c(o.currentTarget.value)},value:a,placeholder:"How are you today?",autoFocus:!0})})]})},R=(0,A.Z)({form:"profileInfo"})((function(o){var n=o.profile,t=o.status,i=o.updateStatus,s=o.handleSubmit,e=(o.initialValues,o.error),_=(0,r.useState)(!1),a=(0,D.Z)(_,2),c=a[0],l=a[1],f=function(o){o.target.closest("form")||(s(),l(!1))};(0,r.useEffect)((function(){return console.log("mounted"),window.addEventListener("click",f),function(){window.removeEventListener("click",f)}}),[]);var u=(0,r.useState)(n.lookingForAJob),d=(0,D.Z)(u,2),h=d[0],p=d[1],m=Object.keys(n.contacts).map((function(o){return(0,N.jsxs)("div",{className:M.info__contactName,children:[o,": ",(0,C.yj)(C.vs,"Fill me!","contacts."+o,M.info__input)]},o)}));return(0,N.jsxs)("form",{className:M.info__info,onSubmit:s,children:[(0,N.jsx)("div",{className:M.info__name,children:n.fullName}),(0,N.jsx)(T,{status:t,updateStatus:i}),(0,N.jsx)("div",{className:M.info__additional,children:(0,N.jsxs)("div",{className:c?M.info__contactsActive:M.info__contacts,onClick:function(){l(!0)},children:[(0,N.jsxs)("div",{onClick:function(){return p(!h)},className:h?M.info__lookingActive:M.info__looking,children:[(0,N.jsx)(F.Z,{checked:h,component:"input",type:"checkbox",name:"lookingForAJob",className:M.info__checkbox}),(0,N.jsx)("label",{for:"lookingForAJob",children:c?"Looking for a job?":n.lookingForAJob?"Looking for a job":"Not looking for a job"})]}),(0,N.jsx)("div",{className:M.info__contactsHead,children:"Contacts:"}),m]})}),e&&(0,N.jsx)("div",{className:M.info__error,children:e})]})})),B=function(o){var n=o.profile,t=o.status,i=(o.updateStatus,o.goToEditmode,Object.keys(n.contacts).map((function(o){return(0,N.jsxs)("div",{className:M.info__contactName,children:[o,": ",n.contacts[o]?(0,N.jsx)("a",{href:n.contacts[o],target:"_blank",className:M.info__contact,children:n.contacts[o]}):(0,N.jsx)("div",{className:M.info__contactNull,children:"unknown"})]})})));return(0,N.jsxs)("div",{className:M.info__info,children:[(0,N.jsx)("div",{className:M.info__name,children:n.fullName}),(0,N.jsx)("div",{className:M.status,children:(0,N.jsx)("div",{className:M.status__text,children:t||"No status"})}),(0,N.jsx)("div",{className:M.info__additional,children:(0,N.jsxs)("div",{className:M.info__contacts,children:[(0,N.jsx)("div",{className:M.info__looking,children:n.lookingForAJob?"Looking for a job":"Isn't looking for a job"}),(0,N.jsx)("div",{className:M.info__contactsHead,children:"Contacts:"}),i]})})]})},W=function(o){var n=o.profile,t=o.status,s=o.updateStatus,e=o.isOwner,_=o.savePhoto,a=o.saveInfo,c=(o.isFetching,(0,r.useState)(!1)),l=(0,D.Z)(c,2),f=(l[0],l[1]);return n?(0,N.jsxs)("div",{children:[(0,N.jsx)("div",{className:M.content__cover,children:(0,N.jsx)("img",{src:"https://midag.ru/wp-content/uploads/2022/11/religiya-%E2%84%9645_1-2.jpg",alt:""})}),(0,N.jsx)("div",{className:M.content__item,children:(0,N.jsxs)("div",{className:M.info,children:[(0,N.jsx)("div",{className:M.info__item,children:(0,N.jsxs)("div",{className:M.info__photo,children:[(0,N.jsx)("img",{src:n.photos.large||O,alt:""}),e&&(0,N.jsx)("div",{className:M.info__photo__upd,children:(0,N.jsx)("div",{className:M.info__photo__upd__icon,children:"+"})}),e&&(0,N.jsx)("input",{type:"file",className:M.info__updatePhoto,onChange:function(o){o.target.files.length&&_(o.target.files[0])}})]})}),e?(0,N.jsx)(R,{initialValues:n,profile:n,status:t,updateStatus:s,onSubmit:function(o){for(var t=(0,i.Z)((0,i.Z)({},n),{},{lookingForAJob:o.lookingForAJob,contacts:(0,i.Z)((0,i.Z)({},n.contacts),o.contacts)}),s=0;s<Object.keys(t.contacts).length;s++)if(t.contacts[Object.keys(t.contacts)[s]]!==n.contacts[Object.keys(t.contacts)[s]]||t.lookingForAJob!==n.lookingForAJob){delete t.photos,a(t).then((function(){f(!1)})).catch((function(){})),console.log("sent");break}f(!1)}}):(0,N.jsx)(B,{profile:n,status:t,updateStatus:s,isOwner:e,goToEditmode:function(){f(!0)}})]})})]}):(0,N.jsx)(J.Z,{})},z=function(){for(var o=[],n=0;n<8;n++)o[n]=(0,N.jsx)("div",{className:M.infoLoading__contactName});return(0,N.jsxs)("div",{children:[(0,N.jsx)("div",{className:M.content__cover,children:(0,N.jsx)("img",{src:"https://midag.ru/wp-content/uploads/2022/11/religiya-%E2%84%9645_1-2.jpg",alt:""})}),(0,N.jsx)("div",{className:M.content__item,children:(0,N.jsxs)("div",{className:M.infoLoading,children:[(0,N.jsx)("div",{className:M.infoLoading__photo}),(0,N.jsxs)("div",{className:M.infoLoading__info,children:[(0,N.jsx)("div",{className:M.infoLoading__name}),(0,N.jsx)("div",{className:M.infoLoading__status}),(0,N.jsx)("div",{className:M.infoLoading__additional,children:(0,N.jsxs)("div",{className:M.infoLoading__contacts,children:[(0,N.jsx)("div",{className:M.infoLoading__looking}),(0,N.jsxs)("div",{className:M.infoLoading__contactsHead,children:[(0,N.jsx)("div",{className:M.infoLoading__contactsHeader}),o]})]})})]})]})})]})},q=function(o){return(0,N.jsxs)("div",{children:[o.isFetching?(0,N.jsx)(z,{}):(0,N.jsx)(W,{profile:o.profile,status:o.status,updateStatus:o.updateStatus,isOwner:o.isOwner,savePhoto:o.savePhoto,setProfileInfoSuccess:o.setProfileInfoSuccess,saveInfo:o.saveInfo,isFetching:o.isFetching}),(0,N.jsx)(E,{})]})},G=function(o){(0,_.Z)(t,o);var n=(0,a.Z)(t);function t(){return(0,s.Z)(this,t),n.apply(this,arguments)}return(0,e.Z)(t,[{key:"refreshProfile",value:function(){var o=this.props.router.params.userId;o||(o=this.props.authorizedUserId),this.props.getProfile(o),this.props.getStatus(o)}},{key:"componentDidMount",value:function(){this.refreshProfile()}},{key:"componentDidUpdate",value:function(o,n){this.props.router.location.pathname!==o.router.location.pathname&&this.refreshProfile()}},{key:"render",value:function(){return(0,N.jsx)(q,(0,i.Z)((0,i.Z)({},this.props),{},{profile:this.props.profile,isOwner:!this.props.router.params.userId||this.props.router.params.userId==this.props.authorizedUserId,savePhoto:this.props.savePhoto,setProfileInfoSuccess:this.props.setProfileInfoSuccess,saveInfo:this.props.saveInfo,isFetching:this.props.isFetching}))}}]),t}(r.Component);var V=(0,d.qC)((0,c.$j)((function(o){return{profile:o.profilePage.profile,status:o.profilePage.status,authorizedUserId:o.auth.userId,isAuth:o.auth.isAuth,isFetching:o.profilePage.isFetching}}),{getProfile:l.Ai,updateStatus:l.Nf,getStatus:l.lR,setProfile:l.RG,setPhotoSuccess:l.Qp,savePhoto:l.Ju,setProfileInfoSuccess:l.Ci,saveInfo:l.Mt}),u.D,(function(o){return function(n){var t=(0,f.TH)(),s=(0,f.s0)(),e=(0,f.UO)();return(0,N.jsx)(o,(0,i.Z)((0,i.Z)({},n),{},{router:{location:t,navigate:s,params:e}}))}}))(G)},4654:function(o,n,t){t.d(n,{s5:function(){return x},vs:function(){return P},gx:function(){return g},jR:function(){return j},yj:function(){return k}});var i=t(8683),s=t(5987),e=t(6139),_="FormsControls_formControl__lnsDE",a="FormsControls_error__yDObs",r="FormsControls_errorMessage__WP70X",c="FormsControls_errorMessageAuth__d6Igt",l="FormsControls_formControlInfo__m1dBz",f=t(184),u=["input","meta","child"],d=["input","meta","child"],h=["input","meta","child"],p=["input","meta","child"],m=["input","meta","child"],v=function(o){o.input;var n=o.meta,t=(o.child,(0,s.Z)(o,u)),i=n.touched&&n.error;return(0,f.jsxs)("div",{className:_+" "+(i?a:""),children:[t.children,i&&(0,f.jsx)("div",{className:r,children:(0,f.jsx)("span",{children:n.error})})]})},g=function(o){var n=o.input,t=(o.meta,o.child,(0,s.Z)(o,d));return(0,f.jsx)(v,(0,i.Z)((0,i.Z)({},o),{},{children:(0,f.jsx)("textarea",(0,i.Z)((0,i.Z)({},n),t))}))},x=function(o){var n=o.input,t=o.meta,e=t.touched,r=t.error,l=(o.child,(0,s.Z)(o,h)),u=e&&r;return(0,f.jsxs)("div",{className:_+" "+(u?a:""),children:[(0,f.jsx)("input",(0,i.Z)((0,i.Z)({},n),l)),u&&(0,f.jsx)("div",{className:c,children:(0,f.jsx)("div",{children:r})})]})},j=function(o,n,t,s,_){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};return(0,f.jsx)(e.Z,(0,i.Z)({component:o,placeholder:t,name:s,validate:n,className:_},a))},P=function(o){var n=o.input,t=(o.meta,o.child,(0,s.Z)(o,p));return(0,f.jsx)(N,(0,i.Z)((0,i.Z)({},o),{},{children:(0,f.jsx)("input",(0,i.Z)((0,i.Z)({},n),t))}))},N=function(o){o.input;var n=o.meta,t=(o.child,(0,s.Z)(o,m)),i=n.touched&&n.error;return(0,f.jsx)("div",{className:l+" "+(i?a:""),children:t.children})},k=function(o,n,t,s){var _=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return(0,f.jsx)(e.Z,(0,i.Z)({component:o,placeholder:n,name:t,className:s},_))}},1548:function(o,n,t){t.d(n,{D:function(){return d}});var i=t(8683),s=t(5671),e=t(3144),_=t(136),a=t(516),r=t(2791),c=t(8687),l=t(7689),f=t(184),u=function(o){return{isAuth:o.auth.isAuth}},d=function(o){var n=function(n){(0,_.Z)(r,n);var t=(0,a.Z)(r);function r(){return(0,s.Z)(this,r),t.apply(this,arguments)}return(0,e.Z)(r,[{key:"render",value:function(){return this.props.isAuth?(0,f.jsx)(o,(0,i.Z)({},this.props)):(0,f.jsx)(l.Fg,{to:"/login"})}}]),r}(r.Component);return(0,c.$j)(u)(n)}},5304:function(o,n,t){t.d(n,{C:function(){return i},D:function(){return s}});var i=function(o){if(!o)return"Field is required"},s=function(o){return function(n){if(n&&n.length>o)return"Max length is ".concat(o," symbols")}}}}]);
//# sourceMappingURL=513.cdd9b1db.chunk.js.map