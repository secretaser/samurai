"use strict";(self.webpackChunkfirst_app=self.webpackChunkfirst_app||[]).push([[204],{3204:function(e,t,n){n.r(t),n.d(t,{default:function(){return q}});var s=n(2791),a="Dialogs_content__Tkd0C",i="Dialogs_dialogs__2mQnd",r="Dialogs_placeholder__eAL-J",o=n(1087),c="Dialogs__item_item__KDZqp",l="Dialogs__item_itemActive__PIpf9",d="Dialogs__item_ava__VmlwK",u="Dialogs__item_text__n5UiQ",m="Dialogs__item_name__hsirp",h="Dialogs__item_message_preview__dCV1U",_=n(184),v=function(e){var t="/dialogs/"+e.id;return(0,_.jsxs)(o.OL,{to:t,className:function(e){return e.isActive?l:c},children:[(0,_.jsx)("div",{className:d,children:(0,_.jsx)("img",{src:e.avaLink,alt:""})}),(0,_.jsxs)("div",{className:u,children:[(0,_.jsx)("div",{className:m,children:e.name}),(0,_.jsx)("div",{className:h,children:e.lastMes})]})]})},f=n(7689),g=n(8687),p=n(5718),x="Chat_chat__pwjoA",j="Chat_chat_header__vluxI",w="Chat_header_ava__hdmh8",C="Chat_header_name__CGqa5",D="Chat_chat_content__d1pA+",N="Chat_input_container__hxr3p",Z="Chat_input_container__input__GwbRz",k="Chat_button__t5JEw",y="Chat_button__svg__1O11Z",L="Message_messageOther__RGyNg",b="Message_messageMy__UaKLV",M=function(e){return(0,_.jsx)("div",{className:e.me==e.sender?b:L,children:e.text})},A=n(5304),E=(n(4654),n(6139)),I=(0,n(704).Z)({form:"addMessage"})((function(e){var t,n=(0,s.useRef)(),a=function(e){"Enter"!=e.key||e.shiftKey||(e.preventDefault(),n.current.click())};(0,s.useEffect)((function(){return window.addEventListener("keydown",a),window.addEventListener("input",i),window.addEventListener("click",i),function(){window.removeEventListener("keydown",a),window.removeEventListener("input",i),window.removeEventListener("click",i)}}),[]);var i=function(e){if(e.target.className==Z)return(t=e.target).style.height="0px",void(t.style.height=t.scrollHeight+"px");t&&e.target.closest("button")&&e.target.closest("button").className==k&&(t.style.height="0px")};return(0,_.jsxs)("form",{className:N,onSubmit:e.handleSubmit,children:[(0,_.jsx)(E.Z,{className:Z,placeholder:"Type your message...",name:"newMessageBody",component:"textarea",validate:[A.C]}),(0,_.jsx)("button",{ref:n,className:k,children:(0,_.jsx)("svg",{className:y,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24",children:(0,_.jsx)("path",{d:"m4.578.33C3.408-.244,2.025-.053,1.056.82.087,1.692-.25,3.048.197,4.272l4.106,7.734L.275,19.733c-.445,1.226-.105,2.58.865,3.45.598.536,1.352.813,2.115.813.477,0,.958-.108,1.407-.329l19.232-11.671L4.578.33Zm-1.577,2.854c-.004-.038.007-.084.062-.133.065-.058.119-.055.157-.043l12.398,7.492H6.9L3.001,3.184Zm.299,17.809c-.039.013-.093.015-.156-.042-.056-.05-.066-.098-.062-.136l3.827-7.314h8.731l-12.339,7.492Z"})})})]})})),F=function(e){var t=e.mesData.map((function(t){return(0,_.jsx)(M,{text:t.text,sender:t.authorID,me:e.me})})),n=(0,s.useRef)();(0,s.useEffect)((function(){n.current.scrollTop=n.current.scrollHeight}),[e.mesData]);return(0,_.jsxs)("div",{className:x,children:[(0,_.jsxs)("div",{className:j,children:[(0,_.jsx)("div",{className:w,children:(0,_.jsx)("img",{src:e.chat.avaLink,alt:""})}),(0,_.jsx)("div",{className:C,children:e.chat.name})]}),(0,_.jsx)("div",{ref:n,className:D,children:t}),(0,_.jsx)(I,{onSubmit:function(t){t.newMessageBody.trim()&&e.sendMessageThunk(e.chat.id,t.newMessageBody.trim(),e.me)}})]})},T=(0,g.$j)((function(e,t){return{mesData:t.dialog.mesData,chat:t.dialog,me:t.me}}),{sendMessageThunk:p.Tu})(F),B=function(e){var t=function(e){return e.mesData[e.mesData.length-1].text},n=e.dialogs.dialogsData.map((function(e){return(0,_.jsx)(v,{name:e.name,id:e.id,lastMes:t(e),avaLink:e.avaLink})})),s=e.dialogs.dialogsData.map((function(t){return(0,_.jsx)(f.AW,{path:"/".concat(t.id),element:(0,_.jsx)(T,{chatID:t.id,dialog:e.dialogs.dialogsData[t.id],me:e.me})})}));return(0,_.jsxs)("div",{className:a,children:[(0,_.jsx)("div",{className:i,children:n}),(0,_.jsxs)(f.Z5,{children:[(0,_.jsx)(f.AW,{path:"/",element:(0,_.jsx)("div",{className:r,children:"Choose a dialog and start chatting!"})}),s]})]})},R=n(1548),q=(0,n(7781).qC)(R.D,(0,g.$j)((function(e){return{dialogs:e.dialogsPage,me:e.auth.userId}}),{sendMessage:p.bG}))(B)},4654:function(e,t,n){n.d(t,{s5:function(){return _},vs:function(){return f},jR:function(){return v},yj:function(){return p}});var s=n(8683),a=n(5987),i=n(6139),r="FormsControls_formControl__lnsDE",o="FormsControls_error__yDObs",c="FormsControls_errorMessageAuth__d6Igt",l="FormsControls_formControlInfo__m1dBz",d=n(184),u=["input","meta","child"],m=["input","meta","child"],h=["input","meta","child"],_=function(e){var t=e.input,n=e.meta,i=n.touched,l=n.error,m=(e.child,(0,a.Z)(e,u)),h=i&&l;return(0,d.jsxs)("div",{className:r+" "+(h?o:""),children:[(0,d.jsx)("input",(0,s.Z)((0,s.Z)({},t),m)),h&&(0,d.jsx)("div",{className:c,children:(0,d.jsx)("div",{children:l})})]})},v=function(e,t,n,a,r){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};return(0,d.jsx)(i.Z,(0,s.Z)({component:e,placeholder:n,name:a,validate:t,className:r},o))},f=function(e){var t=e.input,n=(e.meta,e.child,(0,a.Z)(e,m));return(0,d.jsx)(g,(0,s.Z)((0,s.Z)({},e),{},{children:(0,d.jsx)("input",(0,s.Z)((0,s.Z)({},t),n))}))},g=function(e){e.input;var t=e.meta,n=(e.child,(0,a.Z)(e,h)),s=t.touched&&t.error;return(0,d.jsx)("div",{className:l+" "+(s?o:""),children:n.children})},p=function(e,t,n,a){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return(0,d.jsx)(i.Z,(0,s.Z)({component:e,placeholder:t,name:n,className:a},r))}},1548:function(e,t,n){n.d(t,{D:function(){return h}});var s=n(8683),a=n(5671),i=n(3144),r=n(136),o=n(516),c=n(2791),l=n(8687),d=n(7689),u=n(184),m=function(e){return{isAuth:e.auth.isAuth}},h=function(e){var t=function(t){(0,r.Z)(c,t);var n=(0,o.Z)(c);function c(){return(0,a.Z)(this,c),n.apply(this,arguments)}return(0,i.Z)(c,[{key:"render",value:function(){return this.props.isAuth?(0,u.jsx)(e,(0,s.Z)({},this.props)):(0,u.jsx)(d.Fg,{to:"/login"})}}]),c}(c.Component);return(0,l.$j)(m)(t)}},5304:function(e,t,n){n.d(t,{C:function(){return s}});var s=function(e){if(!e)return"Field is required"}}}]);
//# sourceMappingURL=204.3a89d4b4.chunk.js.map